<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>FOUDEK – Théorie et calculs</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== STYLE EXISTANT ===== */
body {
  margin: 0;
  padding: 0;
  background: #0e0f14;
  color: #e6e7eb;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, Oxygen, Ubuntu, Cantarell, "Inter", sans-serif;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 40px 20px;
}

h1, h2, h3 {
  text-align: center;
  font-weight: 700;
}

h1 { font-size: 30px; margin-bottom: 40px; }
h2 { font-size: 24px; margin: 50px 0 20px; }

p { margin: 16px 0; font-size: 16px; }

.separator {
  height: 1px;
  background: #2a2c36;
  margin: 50px 0;
}

.formula {
  background: #1a1c25;
  border-radius: 8px;
  padding: 14px 18px;
  font-family: "JetBrains Mono", Consolas, monospace;
  font-size: 15px;
  margin: 20px 0;
  text-align: center;
}

.cards {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.card {
  background: #0e0f14;
  border: 1px solid #2a2c36;
  border-radius: 14px;
  padding: 20px;
  width: 300px;
}

.card.blue { box-shadow: 0 0 18px rgba(37,99,235,0.35); }
.card.red { box-shadow: 0 0 18px rgba(220,38,38,0.35); }

label { display:block; margin-top:12px; }
input {
  width:100%;
  padding:8px;
  background:#0e0f14;
  border:1px solid #3a3d4d;
  color:#e6e7eb;
  border-radius:6px;
}

button {
  margin-top:16px;
  padding:10px;
  width:100%;
  border:none;
  border-radius:6px;
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.result {
  margin-top:15px;
  padding:10px;
  border-radius:999px;
  text-align:center;
  font-weight:bold;
  opacity:0.35;
  transition:0.3s;
}

.result.active { opacity:1; }
.result.blue { background:#1d4ed8; }
.result.red { background:#dc2626; }

/* ===== SIMULATION VISUELLE ===== */

.board {
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
  margin:40px 0;
}

.player {
  border:1px solid #2a2c36;
  border-radius:14px;
  padding:14px;
  text-align:center;
  transition:0.4s;
}

.player.you { border:2px solid #22c55e; }
.player.interval {
  box-shadow:0 0 20px rgba(37,99,235,0.5);
  transform:scale(1.04);
}

.bubble {
  margin-top:8px;
  padding:6px;
  border-radius:999px;
  font-size:13px;
}

.blue { background:#1d4ed8; }
.red { background:#dc2626; }

.best {
  margin-top:20px;
  padding:10px;
  border-radius:999px;
  background:#1a1c25;
  text-align:center;
  font-weight:bold;
}
</style>
</head>

<body>
<div class="container">

<h1>FOUDEK – Théorie et probabilité hors intervalle</h1>

<!-- ===== TABLEAUX INCHANGÉS ===== -->

<div class="cards">
  <div class="card blue">
    <h3>FOUDEK</h3>
    <label>Intervalle</label>
    <input id="I1" type="number">
    <label>Hors intervalle</label>
    <input id="R1" type="number">
    <label>Loups</label>
    <input id="L1" type="number">
    <button onclick="calcFoudek()">Calculer</button>
    <div id="resF" class="result blue">—</div>
  </div>

  <div class="card red">
    <h3>Classique</h3>
    <label>Intervalle</label>
    <input id="I2" type="number">
    <label>Hors intervalle</label>
    <input id="R2" type="number">
    <label>Loups</label>
    <input id="L2" type="number">
    <button onclick="calcClassic()">Calculer</button>
    <div id="resC" class="result red">—</div>
  </div>
</div>

<!-- ===== SIMULATION AJOUTÉE ===== -->

<div class="separator"></div>

<h2>Simulation de partie</h2>

<div class="board">
  <div class="player you">Vous</div>
  <div class="player" data-id="A">A</div>
  <div class="player" data-id="B">B</div>
  <div class="player" data-id="C">C</div>
  <div class="player" data-id="D">D</div>
  <div class="player" data-id="E">E</div>
  <div class="player" data-id="F">F</div>
  <div class="player" data-id="G">G</div>
</div>

<input id="votes" placeholder="A>B,C>B">
<button onclick="simulate()">Simuler</button>

<div class="best" id="best">—</div>

</div>

<script>
// ===== CALCULS INCHANGÉS =====
function C(n,k){if(k<0||k>n)return 0;let r=1;for(let i=1;i<=k;i++)r*=(n-i+1)/i;return r;}

function calcFoudek(){
  const I=+I1.value,R=+R1.value,L=+L1.value;
  let num=0,den=0;
  for(let k=0;k<=1;k++){
    if(k>L||L-k>R)continue;
    const c=C(I,k)*C(R,L-k);
    den+=c; num+=c*((L-k)/R);
  }
  resF.textContent=((num/den)*100).toFixed(1)+" %";
  resF.classList.add("active");
}

function calcClassic(){
  const I=+I2.value,R=+R2.value,L=+L2.value;
  resC.textContent=((L/(I+R))*100).toFixed(1)+" %";
  resC.classList.add("active");
}

// ===== SIMULATION (LECTURE DES RÉSULTATS) =====
function simulate(){
  document.querySelectorAll(".player").forEach(p=>p.classList.remove("interval"));
  const votes=document.getElementById("votes").value.split(",");
  const interval=new Set();
  votes.forEach(v=>{
    const[a,b]=v.split(">");
    if(a&&b){interval.add(a.trim());interval.add(b.trim());}
  });
  interval.forEach(id=>{
    const el=document.querySelector(`[data-id="${id}"]`);
    if(el)el.classList.add("interval");
  });
  best.textContent="Résultats visibles dans les tableaux ci-dessus";
}
</script>

</body>
</html>