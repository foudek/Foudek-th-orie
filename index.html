<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Th√©orie de FOUDEK ‚Äì Probabilit√© Loup-Garou</title>

<style>
body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  background: #000000;
  color: #e5e7eb;
}

h1, h2, h3 {
  text-align: center;
}

.container {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
  margin-top: 30px;
}

.card {
  background: #020617;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 20px;
  width: 330px;
}

.card h2 {
  margin-bottom: 15px;
}

label {
  display: block;
  margin-top: 10px;
  font-size: 14px;
}

input {
  width: 100%;
  padding: 6px;
  margin-top: 4px;
  background: #000;
  color: #e5e7eb;
  border: 1px solid #475569;
  border-radius: 5px;
}

button {
  width: 100%;
  margin-top: 15px;
  padding: 10px;
  background: #2563eb;
  border: none;
  color: white;
  font-size: 16px;
  border-radius: 6px;
  cursor: pointer;
}

button:hover {
  background: #1d4ed8;
}

.result {
  margin-top: 15px;
  padding: 10px;
  background: #0f172a;
  border-radius: 8px;
  text-align: center;
  font-size: 18px;
}

/* SECTION COURS */
.course {
  max-width: 900px;
  margin: 60px auto;
  padding: 25px;
  background: #020617;
  border: 1px solid #334155;
  border-radius: 12px;
}

.course h2 {
  color: #60a5fa;
}

.course p, .course ul, .course li {
  line-height: 1.6;
  margin-bottom: 15px;
}

.blue {
  color: #60a5fa;
  font-weight: bold;
}

hr {
  border:1px solid #334155;
  margin:30px 0;
}
</style>
</head>

<body>

<h1>Probabilit√© de voter un loup hors intervalle</h1>

<div class="container">

  <!-- MODE FOUDEK -->
  <div class="card">
    <h2>üîµ Th√©orie de FOUDEK</h2>

    <label>Joueurs dans l‚Äôintervalle</label>
    <input type="number" id="I1" value="4">

    <label>Joueurs hors intervalle</label>
    <input type="number" id="R1" value="3">

    <label>Loups vivants</label>
    <input type="number" id="L1" value="2">

    <button onclick="calculateLimited()">Calculer</button>

    <div class="result" id="result1">‚Äî</div>
  </div>

  <!-- MODE CLASSIQUE -->
  <div class="card">
    <h2>üî¥ Mod√®le classique</h2>

    <label>Joueurs dans l‚Äôintervalle</label>
    <input type="number" id="I2" value="4">

    <label>Joueurs hors intervalle</label>
    <input type="number" id="R2" value="3">

    <label>Loups vivants</label>
    <input type="number" id="L2" value="2">

    <button onclick="calculateFull()">Calculer</button>

    <div class="result" id="result2">‚Äî</div>
  </div>

</div>

<!-- SECTION COURS -->
<div class="course">
  <h2>üìò Cours ‚Äì Th√©orie de FOUDEK</h2>

  <p>
    La <strong>th√©orie de FOUDEK</strong> repose sur un principe fondamental :
    <em>un joueur innocent cherche toujours √† maximiser la probabilit√© de toucher un loup,
    en utilisant uniquement l‚Äôinformation logique disponible</em>.
  </p>

  <p class="blue">
    üëâ La bulle bleue repr√©sente la <strong>probabilit√© conditionnelle</strong> qu‚Äôun joueur hors intervalle soit loup selon la th√©orie de FOUDEK.
  </p>

  <hr>

  <h3>‚ùì Pourquoi l‚Äôintervalle contient au maximum 1 loup</h3>

  <p>
    Dans une partie, un joueur <strong>innocent</strong> n‚Äôa aucun int√©r√™t
    √† voter un autre innocent. La th√©orie de FOUDEK part donc du principe que :
  </p>

  <p class="blue">
    üëâ L‚Äôintervalle contient 0 ou 1 loup maximum (0/4 ou 1/4).
  </p>

  <p>
    Si l‚Äôintervalle contenait 2 loups, la probabilit√© pour un joueur hors intervalle d‚Äô√™tre innocent
    serait plus faible que l‚Äôinverse, rendant la d√©cision de voter hors intervalle moins optimale pour un innocent.
    On exclut donc ces sc√©narios.
  </p>

  <hr>

  <h3>üßÆ D√©tail du calcul pour un loup hors intervalle</h3>

  <p>
    On note :
  </p>
  <ul>
    <li><strong>I</strong> : nombre de joueurs dans l‚Äôintervalle</li>
    <li><strong>R</strong> : nombre de joueurs hors intervalle</li>
    <li><strong>L</strong> : nombre de loups vivants</li>
    <li><strong>k</strong> : nombre de loups dans l‚Äôintervalle</li>
  </ul>

  <p>
    La probabilit√© qu‚Äôun joueur hors intervalle soit loup se calcule comme suit :
  </p>

  <p>
    1Ô∏è‚É£ On √©num√®re tous les cas possibles de k (ici 0 ou 1).<br>
    2Ô∏è‚É£ Pour chaque k, on calcule le poids combinatoire :
  </p>

  <p style="font-family:monospace; background:#111; padding:8px; border-radius:6px;">
    W(k) = C(I, k) √ó C(R, L-k)
  </p>

  <p>
    3Ô∏è‚É£ On normalise ces poids pour obtenir les probabilit√©s des cas :
  </p>

  <p style="font-family:monospace; background:#111; padding:8px; border-radius:6px;">
    P(k) = W(k) / Œ£ W(i)
  </p>

  <p>
    4Ô∏è‚É£ Enfin, on calcule la probabilit√© conditionnelle qu‚Äôun joueur hors intervalle soit loup :
  </p>

  <p style="font-family:monospace; background:#111; padding:8px; border-radius:6px;">
    P(loup hors intervalle) = Œ£ P(k) √ó ((L - k) / R)
  </p>

  <hr>

  <h3>üìê √âquation universelle finale</h3>

  <p style="font-family:monospace; background:#111; padding:8px; border-radius:6px;">
    P_R = Œ£ (k=0 √† k_max) [ C(I, k) √ó C(R, L-k) / Œ£ (i=0 √† k_max) C(I, i) √ó C(R, L-i) ] √ó (L - k)/R
  </p>

  <p>
    O√π :<br>
    <strong>k_max</strong> = maximum de loups autoris√©s dans l‚Äôintervalle (selon FOUDEK)<br>
    <strong>I</strong> = joueurs dans l‚Äôintervalle<br>
    <strong>R</strong> = joueurs hors intervalle<br>
    <strong>L</strong> = loups vivants
  </p>

</div>

<script>
function comb(n, k) {
  if (k < 0 || k > n) return 0;
  let r = 1;
  for (let i = 1; i <= k; i++) {
    r = r * (n - i + 1) / i;
  }
  return r;
}

function calculateLimited() {
  const I = +document.getElementById("I1").value;
  const R = +document.getElementById("R1").value;
  const L = +document.getElementById("L1").value;

  let total = 0, p = 0;

  for (let k = Math.max(0, L - R); k <= Math.min(1, I, L); k++) {
    const w = comb(I, k) * comb(R, L - k);
    total += w;
  }

  for (let k = Math.max(0, L - R); k <= Math.min(1, I, L); k++) {
    const w = comb(I, k) * comb(R, L - k);
    p += (w / total) * ((L - k) / R);
  }

  document.getElementById("result1").innerHTML =
    "<span class='blue'>Probabilit√© FOUDEK : " + (p * 100).toFixed(1) + " %</span>";
}

function calculateFull() {
  const I = +document.getElementById("I2").value;
  const R = +document.getElementById("R2").value;
  const L = +document.getElementById("L2").value;

  let total = comb(I + R, L), p = 0;

  for (let k = Math.max(0, L - R); k <= Math.min(2, I, L); k++) {
    p += (comb(I, k) * comb(R, L - k) / total) * ((L - k) / R);
  }

  document.getElementById("result2").innerHTML =
    "Probabilit√© classique : " + (p * 100).toFixed(1) + " %";
}
</script>

</body>
</html>
